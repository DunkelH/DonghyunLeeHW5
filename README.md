# Hw5

## 1. create_scene() – 단위 구 구성
이 함수는 화면에 그릴 구의 정점과 삼각형 인덱스를 준비하는 역할을 한다. 구는 위도와 경도 방향으로 일정 간격을 나누어 만든 격자 기반의 메시(mesh)로 표현했으며, 위도/경도에 해당하는 각도 값을 기반으로 각 정점의 3차원 좌표를 계산하였다.

위도는 height = 16, 경도는 width = 32로 설정해 총 480개의 정점이 생성되고, 극점(북극, 남극) 2개가 추가로 더해진다.

정점 좌표는 구면 좌표계 → 직교 좌표계로 변환하는 방식으로 계산된다.

삼각형 인덱스는 각 사각형을 두 개의 삼각형으로 나누는 방식으로 연결하고, 북극과 남극과의 연결을 위한 삼각형들도 별도로 구성했다.

이 함수의 결과로 vertices와 gIndexBuffer가 모두 초기화되어 이후 렌더링에 사용할 수 있는 기본 데이터가 완성된다.

## 2. viewport_transform() – 스크린 좌표 변환
변환 파이프라인을 거쳐 나온 정점은 클립 공간 (clip space)에서 정규화 장치 좌표계 (NDC)로 들어온다. 이 좌표는 [-1,1] 범위에 있으므로, 실제 화면 픽셀 좌표계로 바꾸려면 변환이 필요하다.

이 함수에서는 NDC 좌표를 [0, Width], [0, Height] 범위로 매핑하기 위해 간단한 선형 변환을 적용하였다.

최종적으로는 정점의 x, y, z 값을 화면 픽셀 기준의 실수값으로 변환해 vec3로 반환한다.

z값은 깊이 비교에 사용되기 때문에 보존된다.

결과적으로 이 함수는 3D 공간의 정점 하나를 2D 이미지 좌표로 매핑하는 역할을 하며, 픽셀 단위의 위치 연산이 가능하게 만든다.

## 3. render() – 파이프라인 전체 흐름과 소프트웨어 래스터라이저
이 함수는 실제 화면에 출력될 이미지를 생성하는 핵심 파트다. 먼저, 생성된 구의 정점 데이터를 카메라 기준으로 변환하고, 투영 행렬을 거쳐 화면 좌표계로 보낸다. 이후 각 삼각형을 픽셀 단위로 검사하며 채워넣는 소프트웨어 래스터라이저가 동작한다.

구현 흐름은 다음과 같다:
변환 행렬 구성:

model: 단위 구를 (0,0,-7) 위치로 이동하고, 반지름 2로 확장

view: 카메라 위치를 원점으로 설정하고 z-축 반대 방향을 바라보게 설정

projection: 과제에서 제시한 프러스텀 값을 그대로 사용해 원근 투영 적용

depth buffer 및 이미지 초기화:

배경을 검정색으로 설정

각 픽셀의 초기 깊이를 무한대로 설정하여 최전면 픽셀만 남도록 처리

삼각형 루프 내 동작:

각 삼각형의 세 정점을 모델 → 뷰 → 투영 → 뷰포트 변환을 통해 화면 좌표로 변환

삼각형이 차지할 수 있는 bounding box를 계산하여 해당 범위의 픽셀을 검사

각 픽셀에 대해 바리센트릭 좌표를 이용해 삼각형 내부 여부를 판단하고, 깊이를 보간

기존 깊이 버퍼값과 비교하여 더 가까운 경우만 픽셀 색상을 흰색으로 설정

결과적으로, 화면에는 흰색으로 구성된 구가 출력되고, 겹치는 삼각형은 z-buffer에 의해 제거되어 단일 음영 구(Unshaded Sphere) 형태가 잘 표현된다.
